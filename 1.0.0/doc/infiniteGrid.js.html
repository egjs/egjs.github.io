<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>egjs - API</title>
    
    
    
    
    
    <meta property="og:title" content=""/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content=""/>
    
    <meta property="og:url" content=""/>
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <script src="scripts/jquery.min.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/bootstrap.min.css">
    <link type="text/css" rel="stylesheet" href="styles/jaguar.css">
    
    
    <script>
    var config = {"monospaceLinks":true,"cleverLinks":true,"default":{"outputSourceFiles":true},"applicationName":"egjs","disqus":"egjs","googleAnalytics":"","openGraph":{"title":"","type":"website","image":"","site_name":"","url":""},"meta":{"title":"egjs - API","description":"","keyword":""},"linenums":true};
    </script>
    

    
</head>
<body>
<div id="wrap" class="clearfix">
    
<div class="navigation">
    <h3 class="applicationName"><a href="index.html">egjs</a></h3>

    <div class="search">
        <input id="search" type="text" class="form-control input-sm" placeholder="Search Documentations">
    </div>
    <ul class="list">
    
    
        <!-- Grouping Version -->
        <ul class="group">
        <span>egjs</span>
        
            
<li class="item" data-name="eg">
    <span class="title">
        <a href="eg.html">eg</a>
        
        <span class="static">static</span>
        
    </span>
    <ul class="members itemMembers">
    
    <span class="subtitle">Members</span>
    
        <li data-name="eg.VERSION"><a href="eg.html#VERSION">VERSION</a></li>
    
    </ul>
    <ul class="typedefs itemMembers">
    
    </ul>
    <ul class="methods itemMembers">
    
    <span class="subtitle">Methods</span>
    
        <li data-name="eg#agent"><a href="eg.html#agent">agent</a></li>
    
        <li data-name="eg#cancelAnimationFrame"><a href="eg.html#cancelAnimationFrame">cancelAnimationFrame</a></li>
    
        <li data-name="eg#isHWAccelerable"><a href="eg.html#isHWAccelerable">isHWAccelerable</a></li>
    
        <li data-name="eg#isPortrait"><a href="eg.html#isPortrait">isPortrait</a></li>
    
        <li data-name="eg#isTransitional"><a href="eg.html#isTransitional">isTransitional</a></li>
    
        <li data-name="eg#requestAnimationFrame"><a href="eg.html#requestAnimationFrame">requestAnimationFrame</a></li>
    
        <li data-name="eg#translate"><a href="eg.html#translate">translate</a></li>
    
    </ul>
    <ul class="events itemMembers">
    
    </ul>

    

</li>

        
            
<li class="item" data-name="eg.Class">
    <span class="title">
        <a href="eg.Class.html">eg.Class</a>
        
    </span>
    <ul class="members itemMembers">
    
    </ul>
    <ul class="typedefs itemMembers">
    
    </ul>
    <ul class="methods itemMembers">
    
    <span class="subtitle">Methods</span>
    
        <li data-name="eg.Class.extend"><a href="eg.Class.html#extend">extend</a></li>
    
    </ul>
    <ul class="events itemMembers">
    
    </ul>

    

</li>

        
            
<li class="item" data-name="eg.Component">
    <span class="title">
        <a href="eg.Component.html">eg.Component</a>
        
    </span>
    <ul class="members itemMembers">
    
    </ul>
    <ul class="typedefs itemMembers">
    
    </ul>
    <ul class="methods itemMembers">
    
    <span class="subtitle">Methods</span>
    
        <li data-name="eg.Component#hasOn"><a href="eg.Component.html#hasOn">hasOn</a></li>
    
        <li data-name="eg.Component#instance"><a href="eg.Component.html#instance">instance</a></li>
    
        <li data-name="eg.Component#off"><a href="eg.Component.html#off">off</a></li>
    
        <li data-name="eg.Component#on"><a href="eg.Component.html#on">on</a></li>
    
        <li data-name="eg.Component#option"><a href="eg.Component.html#option">option</a></li>
    
        <li data-name="eg.Component#trigger"><a href="eg.Component.html#trigger">trigger</a></li>
    
    </ul>
    <ul class="events itemMembers">
    
    </ul>

    

</li>

        
            
<li class="item" data-name="eg.Flicking">
    <span class="title">
        <a href="eg.Flicking.html">eg.Flicking</a>
        
    </span>
    <ul class="members itemMembers">
    
    </ul>
    <ul class="typedefs itemMembers">
    
    </ul>
    <ul class="methods itemMembers">
    
    <span class="subtitle">Methods</span>
    
        <li data-name="eg.Flicking#getAllElements"><a href="eg.Flicking.html#getAllElements">getAllElements</a></li>
    
        <li data-name="eg.Flicking#getElement"><a href="eg.Flicking.html#getElement">getElement</a></li>
    
        <li data-name="eg.Flicking#getIndex"><a href="eg.Flicking.html#getIndex">getIndex</a></li>
    
        <li data-name="eg.Flicking#getNextElement"><a href="eg.Flicking.html#getNextElement">getNextElement</a></li>
    
        <li data-name="eg.Flicking#getNextIndex"><a href="eg.Flicking.html#getNextIndex">getNextIndex</a></li>
    
        <li data-name="eg.Flicking#getPrevIndex"><a href="eg.Flicking.html#getPrevIndex">getPrevIndex</a></li>
    
        <li data-name="eg.Flicking#getTotalCount"><a href="eg.Flicking.html#getTotalCount">getTotalCount</a></li>
    
        <li data-name="eg.Flicking#hasOn"><a href="eg.Flicking.html#hasOn">hasOn</a></li>
    
        <li data-name="eg.Flicking#instance"><a href="eg.Flicking.html#instance">instance</a></li>
    
        <li data-name="eg.Flicking#isPlaying"><a href="eg.Flicking.html#isPlaying">isPlaying</a></li>
    
        <li data-name="eg.Flicking#moveTo"><a href="eg.Flicking.html#moveTo">moveTo</a></li>
    
        <li data-name="eg.Flicking#next"><a href="eg.Flicking.html#next">next</a></li>
    
        <li data-name="eg.Flicking#off"><a href="eg.Flicking.html#off">off</a></li>
    
        <li data-name="eg.Flicking#on"><a href="eg.Flicking.html#on">on</a></li>
    
        <li data-name="eg.Flicking#option"><a href="eg.Flicking.html#option">option</a></li>
    
        <li data-name="eg.Flicking#prev"><a href="eg.Flicking.html#prev">prev</a></li>
    
        <li data-name="eg.Flicking#resize"><a href="eg.Flicking.html#resize">resize</a></li>
    
        <li data-name="eg.Flicking#trigger"><a href="eg.Flicking.html#trigger">trigger</a></li>
    
    </ul>
    <ul class="events itemMembers">
    
    <span class="subtitle">Events</span>
    
        <li data-name="eg.Flicking#event:beforeFlickStart"><a href="eg.Flicking.html#event:beforeFlickStart">beforeFlickStart</a></li>
    
        <li data-name="eg.Flicking#event:beforeRestore"><a href="eg.Flicking.html#event:beforeRestore">beforeRestore</a></li>
    
        <li data-name="eg.Flicking#event:flick"><a href="eg.Flicking.html#event:flick">flick</a></li>
    
        <li data-name="eg.Flicking#event:flickEnd"><a href="eg.Flicking.html#event:flickEnd">flickEnd</a></li>
    
        <li data-name="eg.Flicking#event:restore"><a href="eg.Flicking.html#event:restore">restore</a></li>
    
    </ul>

    

</li>

        
            
<li class="item" data-name="eg.InfiniteGrid">
    <span class="title">
        <a href="eg.InfiniteGrid.html">eg.InfiniteGrid</a>
        
    </span>
    <ul class="members itemMembers">
    
    </ul>
    <ul class="typedefs itemMembers">
    
    </ul>
    <ul class="methods itemMembers">
    
    <span class="subtitle">Methods</span>
    
        <li data-name="eg.InfiniteGrid#append"><a href="eg.InfiniteGrid.html#append">append</a></li>
    
        <li data-name="eg.InfiniteGrid#clear"><a href="eg.InfiniteGrid.html#clear">clear</a></li>
    
        <li data-name="eg.InfiniteGrid#destroy"><a href="eg.InfiniteGrid.html#destroy">destroy</a></li>
    
        <li data-name="eg.InfiniteGrid#fit"><a href="eg.InfiniteGrid.html#fit">fit</a></li>
    
        <li data-name="eg.InfiniteGrid#getBottomElement"><a href="eg.InfiniteGrid.html#getBottomElement">getBottomElement</a></li>
    
        <li data-name="eg.InfiniteGrid#getGroupKeys"><a href="eg.InfiniteGrid.html#getGroupKeys">getGroupKeys</a></li>
    
        <li data-name="eg.InfiniteGrid#getStatue"><a href="eg.InfiniteGrid.html#getStatue">getStatue</a></li>
    
        <li data-name="eg.InfiniteGrid#getTopElement"><a href="eg.InfiniteGrid.html#getTopElement">getTopElement</a></li>
    
        <li data-name="eg.InfiniteGrid#hasOn"><a href="eg.InfiniteGrid.html#hasOn">hasOn</a></li>
    
        <li data-name="eg.InfiniteGrid#instance"><a href="eg.InfiniteGrid.html#instance">instance</a></li>
    
        <li data-name="eg.InfiniteGrid#isProcessing"><a href="eg.InfiniteGrid.html#isProcessing">isProcessing</a></li>
    
        <li data-name="eg.InfiniteGrid#isRecycling"><a href="eg.InfiniteGrid.html#isRecycling">isRecycling</a></li>
    
        <li data-name="eg.InfiniteGrid#layout"><a href="eg.InfiniteGrid.html#layout">layout</a></li>
    
        <li data-name="eg.InfiniteGrid#off"><a href="eg.InfiniteGrid.html#off">off</a></li>
    
        <li data-name="eg.InfiniteGrid#on"><a href="eg.InfiniteGrid.html#on">on</a></li>
    
        <li data-name="eg.InfiniteGrid#option"><a href="eg.InfiniteGrid.html#option">option</a></li>
    
        <li data-name="eg.InfiniteGrid#prepend"><a href="eg.InfiniteGrid.html#prepend">prepend</a></li>
    
        <li data-name="eg.InfiniteGrid#setStatus"><a href="eg.InfiniteGrid.html#setStatus">setStatus</a></li>
    
        <li data-name="eg.InfiniteGrid#trigger"><a href="eg.InfiniteGrid.html#trigger">trigger</a></li>
    
    </ul>
    <ul class="events itemMembers">
    
    <span class="subtitle">Events</span>
    
        <li data-name="eg.InfiniteGrid#event:layoutComplete"><a href="eg.InfiniteGrid.html#event:layoutComplete">layoutComplete</a></li>
    
    </ul>

    

</li>

        
            
<li class="item" data-name="eg.MovableCoord">
    <span class="title">
        <a href="eg.MovableCoord.html">eg.MovableCoord</a>
        
    </span>
    <ul class="members itemMembers">
    
    <span class="subtitle">Members</span>
    
        <li data-name="eg.MovableCoord.DIRECTION_ALL"><a href="eg.MovableCoord.html#DIRECTION_ALL">DIRECTION_ALL</a></li>
    
        <li data-name="eg.MovableCoord.DIRECTION_DOWN"><a href="eg.MovableCoord.html#DIRECTION_DOWN">DIRECTION_DOWN</a></li>
    
        <li data-name="eg.MovableCoord.DIRECTION_HORIZONTAL"><a href="eg.MovableCoord.html#DIRECTION_HORIZONTAL">DIRECTION_HORIZONTAL</a></li>
    
        <li data-name="eg.MovableCoord.DIRECTION_LEFT"><a href="eg.MovableCoord.html#DIRECTION_LEFT">DIRECTION_LEFT</a></li>
    
        <li data-name="eg.MovableCoord.DIRECTION_NONE"><a href="eg.MovableCoord.html#DIRECTION_NONE">DIRECTION_NONE</a></li>
    
        <li data-name="eg.MovableCoord.DIRECTION_RIGHT"><a href="eg.MovableCoord.html#DIRECTION_RIGHT">DIRECTION_RIGHT</a></li>
    
        <li data-name="eg.MovableCoord.DIRECTION_UP"><a href="eg.MovableCoord.html#DIRECTION_UP">DIRECTION_UP</a></li>
    
        <li data-name="eg.MovableCoord.DIRECTION_VERTICAL"><a href="eg.MovableCoord.html#DIRECTION_VERTICAL">DIRECTION_VERTICAL</a></li>
    
    </ul>
    <ul class="typedefs itemMembers">
    
    </ul>
    <ul class="methods itemMembers">
    
    <span class="subtitle">Methods</span>
    
        <li data-name="eg.MovableCoord#bind"><a href="eg.MovableCoord.html#bind">bind</a></li>
    
        <li data-name="eg.MovableCoord#destroy"><a href="eg.MovableCoord.html#destroy">destroy</a></li>
    
        <li data-name="eg.MovableCoord#get"><a href="eg.MovableCoord.html#get">get</a></li>
    
        <li data-name="eg.MovableCoord#hasOn"><a href="eg.MovableCoord.html#hasOn">hasOn</a></li>
    
        <li data-name="eg.MovableCoord#instance"><a href="eg.MovableCoord.html#instance">instance</a></li>
    
        <li data-name="eg.MovableCoord#off"><a href="eg.MovableCoord.html#off">off</a></li>
    
        <li data-name="eg.MovableCoord#on"><a href="eg.MovableCoord.html#on">on</a></li>
    
        <li data-name="eg.MovableCoord#option"><a href="eg.MovableCoord.html#option">option</a></li>
    
        <li data-name="eg.MovableCoord#setBy"><a href="eg.MovableCoord.html#setBy">setBy</a></li>
    
        <li data-name="eg.MovableCoord#setTo"><a href="eg.MovableCoord.html#setTo">setTo</a></li>
    
        <li data-name="eg.MovableCoord#trigger"><a href="eg.MovableCoord.html#trigger">trigger</a></li>
    
        <li data-name="eg.MovableCoord#unbind"><a href="eg.MovableCoord.html#unbind">unbind</a></li>
    
    </ul>
    <ul class="events itemMembers">
    
    <span class="subtitle">Events</span>
    
        <li data-name="eg.MovableCoord#event:animationEnd"><a href="eg.MovableCoord.html#event:animationEnd">animationEnd</a></li>
    
        <li data-name="eg.MovableCoord#event:animationStart"><a href="eg.MovableCoord.html#event:animationStart">animationStart</a></li>
    
        <li data-name="eg.MovableCoord#event:change"><a href="eg.MovableCoord.html#event:change">change</a></li>
    
        <li data-name="eg.MovableCoord#event:hold"><a href="eg.MovableCoord.html#event:hold">hold</a></li>
    
        <li data-name="eg.MovableCoord#event:release"><a href="eg.MovableCoord.html#event:release">release</a></li>
    
    </ul>

    

</li>

        
            
<li class="item" data-name="eg.Visible">
    <span class="title">
        <a href="eg.Visible.html">eg.Visible</a>
        
    </span>
    <ul class="members itemMembers">
    
    </ul>
    <ul class="typedefs itemMembers">
    
    </ul>
    <ul class="methods itemMembers">
    
    <span class="subtitle">Methods</span>
    
        <li data-name="eg.Visible#check"><a href="eg.Visible.html#check">check</a></li>
    
        <li data-name="eg.Visible#hasOn"><a href="eg.Visible.html#hasOn">hasOn</a></li>
    
        <li data-name="eg.Visible#instance"><a href="eg.Visible.html#instance">instance</a></li>
    
        <li data-name="eg.Visible#off"><a href="eg.Visible.html#off">off</a></li>
    
        <li data-name="eg.Visible#on"><a href="eg.Visible.html#on">on</a></li>
    
        <li data-name="eg.Visible#option"><a href="eg.Visible.html#option">option</a></li>
    
        <li data-name="eg.Visible#refresh"><a href="eg.Visible.html#refresh">refresh</a></li>
    
        <li data-name="eg.Visible#trigger"><a href="eg.Visible.html#trigger">trigger</a></li>
    
    </ul>
    <ul class="events itemMembers">
    
    <span class="subtitle">Events</span>
    
        <li data-name="eg.Visible#event:change"><a href="eg.Visible.html#event:change">change</a></li>
    
    </ul>

    

</li>

        
        </ul>
    
        <!-- Grouping Version -->
        <ul class="group">
        <span>jQuery Extension</span>
        
            
<li class="item" data-name="jQuery">
    <span class="title">
        <a href="jQuery.html">jQuery</a>
        
        <span class="static">static</span>
        
    </span>
    <ul class="members itemMembers">
    
    </ul>
    <ul class="typedefs itemMembers">
    
    </ul>
    <ul class="methods itemMembers">
    
    <span class="subtitle">Methods</span>
    
        <li data-name="jQuery.infiniteGrid"><a href="jQuery.html#infiniteGrid">infiniteGrid</a></li>
    
        <li data-name="jQuery.persist"><a href="jQuery.html#persist">persist</a></li>
    
        <li data-name="jQuery.persist"><a href="jQuery.html#persist">persist</a></li>
    
        <li data-name="jQuery.persist"><a href="jQuery.html#persist">persist</a></li>
    
        <li data-name="jQuery.persist"><a href="jQuery.html#persist">persist</a></li>
    
        <li data-name="jQuery.visible"><a href="jQuery.html#visible">visible</a></li>
    
        <li data-name="jQuery#animate"><a href="jQuery.html#animate">animate</a></li>
    
    </ul>
    <ul class="events itemMembers">
    
    <span class="subtitle">Events</span>
    
        <li data-name="jQuery#event:flicking"><a href="jQuery.html#event:flicking">flicking</a></li>
    
        <li data-name="jQuery#event:rotate"><a href="jQuery.html#event:rotate">rotate</a></li>
    
        <li data-name="jQuery#event:scrollEnd"><a href="jQuery.html#event:scrollEnd">scrollEnd</a></li>
    
        <li data-name="jQuery#infiniteGrid:layoutComplete"><a href="jQuery.html#event:infiniteGrid:layoutComplete">infiniteGrid:layoutComplete</a></li>
    
        <li data-name="jQuery#visible:change"><a href="jQuery.html#event:visible:change">visible:change</a></li>
    
    </ul>

    

</li>

        
        </ul>
    
    </ul>
</div>

    <div class="main">
        <h1 class="page-title" data-filename="infiniteGrid.js.html">Source: infiniteGrid.js</h1>
        


    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>// jscs:disable maximumLineLength
eg.module("infiniteGrid", ["jQuery", eg, window, "Outlayer"], function($, ns, global, Outlayer) {
	"use strict";

	// jscs:enable validateLineBreaks, maximumLineLength
	if (!Outlayer) {
		ns.InfiniteGrid = ns.Class({});
		return;
	}

	function clone(target, source, what) {
		var s;
		$.each(what, function(i, v) {
			s = source[v];
			if (s != null) {
				if ($.isArray(s)) {
					target[v] = $.merge([], s);
				} else if ($.isPlainObject(s)) {
					target[v] = $.extend(true, {}, s);
				} else {
					target[v] = s;
				}
			}
		});
		return target;
	}

	var InfiniteGridCore = Outlayer.create("InfiniteGrid");
	$.extend(InfiniteGridCore.prototype, {
		// @override (from layout)
		_resetLayout: function() {
			if (!this._isLayoutInited) {
				this._registGroupKey(this.options.defaultGroupKey, this.items);
			}
			this.element.style.width = null;
			this.getSize();	// create size property
			this._measureColumns();
		},

		// @override
		_getContainerSize: function() {
			return {
				height: Math.max.apply(Math, this._appendCols),
				width: this.size.innerWidth
			};
		},

		// @override
		_getItemLayoutPosition: function(item) {
			if (this._equalItemSize) {
				item.size = this._equalItemSize;
			} else {
				item.getSize();
			}
			(item.isAppend == null) && (item.isAppend = true);
			var y;
			var shortColIndex;
			var isAppend = item.isAppend;
			var cols = isAppend ? this._appendCols : this._prependCols;
			y = Math[isAppend ? "min" : "max"].apply(Math, cols);
			shortColIndex = $.inArray(y, cols);
			cols[shortColIndex] = y + (isAppend ?
				item.size.outerHeight : -item.size.outerHeight);

			return {
				x: this.columnWidth * shortColIndex,
				y: isAppend ? y : y - item.size.outerHeight
			};
		},
		resetLayout: function() {
			this._resetLayout();
			this._isLayoutInited = true;
		},
		updateCols: function(isAppend) {
			var col = isAppend ? this._appendCols : this._prependCols;
			var items = this.getColItems(isAppend);
			var base = this._isFitted || isAppend ? 0 : this._getMinY(items);
			var i = 0;
			var len = col.length;
			var item;
			for (; i &lt; len; i++) {
				if (item = items[i]) {
					col[i] = item.position.y + (isAppend ? item.size.outerHeight : -base);
				} else {
					col[i] = 0;
				}
			}
			return base;
		},
		_getMinY: function(items) {
			return Math.min.apply(Math, $.map(items, function(v) {
				return v ? v.position.y : 0;
			}));
		},
		_measureColumns: function() {
			var containerWidth = this.size.innerWidth;
			var columnWidth = this._getColumnWidth();
			var cols = containerWidth / columnWidth;
			var excess = columnWidth - containerWidth % columnWidth;

			// if overshoot is less than a pixel, round up, otherwise floor it
			cols = Math.max(Math[ excess && excess &lt; 1 ? "round" : "floor" ](cols), 1);

			// reset column Y
			this._appendCols = [];
			this._prependCols = [];
			while (cols--) {
				this._appendCols.push(0);
				this._prependCols.push(0);
			}
		},
		_getColumnWidth: function() {
			var el = this.items[0] && this.items[0].element;
			var size;
			if (el) {
				/* jshint ignore:start */
				size = getSize(el);
				/* jshint ignore:end */
			} else {
				size = {
					outerWidth: 0,
					outerHeight: 0
				};
			}
			this.options.isEqualSize && (this._equalItemSize = size);
			this.columnWidth = size.outerWidth || this.size.outerWidth;
			return this.columnWidth;
		},
		_getColIdx: function(item) {
			return parseInt(item.position.x / parseInt(this.columnWidth, 10), 10);
		},
		getColItems: function(isTail) {
			var len = this._appendCols.length;
			var colItems = new Array(len);
			var item;
			var idx;
			var count = 0;
			var i = isTail ? this.items.length - 1 : 0;
			while (item = this.items[i]) {
				idx = this._getColIdx(item);
				if (!colItems[idx]) {
					colItems[idx] = item;
					if (++count === len) {
						return colItems;
					}
				}
				i += isTail ? -1 : 1;
			}
			return colItems;
		},
		clone: function(target, source) {
			clone(target, source, [
				"_equalItemSize",
				"_appendCols",
				"_prependCols",
				"columnWidth",
				"size",
				"options"
				]);
			target.items = target.items || [];
			target.items.length = source.items.length;
			$.each(source.items, function(i) {
				target.items[i] = clone(target.items[i] || {}, source.items[i],
					["position", "size", "isAppend", "groupKey"]);
			});
			return target;
		},
		itemize: function(elements, groupKey) {
			var items = this._itemize(elements);
			this._registGroupKey(groupKey, items);
			return items;
		},
		_registGroupKey: function(groupKey, array) {
			if (groupKey != null) {
				var i = 0;
				var v;
				while (v = array[i++]) {
					v.groupKey = groupKey;
				}
			}
		},

		// @override
		destroy: function() {
			this.off();
			Outlayer.prototype.destroy.apply(this);
		}
	});

	/**
	 * To build Grid layout UI
	 * InfiniteGrid is composed using Outlayer and supports recycle-dom.
	 * DOM elements are fixed even contents are added infinitely.
	 * @group egjs
	 * @ko 그리드 레이아웃을 구성하는 UI 컴포넌트. InfiniteGrid는 Outlayer로 구성되어 있다. 하지만, 이 컴포넌트는 recycle-dom을 지원한다.
	 * 컨텐츠를 계속 증가하면 할수록 일정한 DOM 개수를 유지할수 있다.
	 * @class
	 * @name eg.InfiniteGrid
	 * @extends eg.Component
	 *
	 * @param {HTMLElement|String|jQuery} element wrapper element &lt;ko>기준 요소&lt;/ko>
	 * @param {Object} [options]
	 * @param {String} [options.itemSelector] selector string for layout item elements &lt;ko>레이아웃의 아이템으로 사용될 엘리먼트들의 셀렉터&lt;/ko>
	 * @param {Boolean} [options.isEqualSize=false] determine if all item's size are same &lt;ko> 모든 아이템의 사이즈가 동일한지를 지정한다&lt;/ko>
	 * @param {String} [options.defaultGroupKey=null] when encounter item markup during the initialization, then set `defaultGroupKey` as groupKey &lt;ko>초기화할때 마크업에 아이템이 있다면, defalutGroupKey를 groupKey로 지정한다&lt;/ko>
	 * @param {Number} [options.count=30] when count value is greater than 0, grid will maintain same DOM length recycling &lt;ko>count값이 0보다 클 경우, 그리드는 일정한 dom 개수를 유지한다&lt;/ko>
	 *
	 * @codepen {"id":"zvrbap", "ko":"InfiniteGrid 데모", "en":"InfiniteGrid example", "collectionId":"DPYEww", "height": 403}
	 *  @support {"ie": "8+", "ch" : "latest", "ff" : "latest",  "sf" : "latest", "ios" : "7+", "an" : "2.1+ (except 3.x)", "n-ios" : "latest", "n-an" : "latest" }
	 *
	 *  @see Outlayer {@link https://github.com/metafizzy/outlayer}
	 *
	 * @example
		&lt;!-- HTML -->
		&lt;ul id="grid">
			&lt;li class="item">
			  &lt;div>테스트1&lt;/div>
			&lt;/li>
			&lt;li class="item">
			  &lt;div>테스트2&lt;/div>
			&lt;/li>
			&lt;li class="item">
			  &lt;div>테스트3&lt;/div>
			&lt;/li>
			&lt;li class="item">
			  &lt;div>테스트4&lt;/div>
			&lt;/li>
			&lt;li class="item">
			  &lt;div>테스트5&lt;/div>
			&lt;/li>
			&lt;li class="item">
			  &lt;div>테스트6&lt;/div>
			&lt;/li>
		&lt;/ul>
		&lt;script>
		var some = new eg.InfiniteGrid("#grid", {
			itemSelector : ".item"
		}).on("layoutComplete", function(e) {
			// ...
		});
		&lt;/script>
	 */
	var EVENTS = {
		"layoutComplete": "layoutComplete"
	};
	ns.InfiniteGrid = ns.Class.extend(ns.Component, {
		_events: function() {
			return EVENTS;
		},
		construct: function(el, options, _prefix) {
			var opts = $.extend({
				"isEqualSize": false,
				"defaultGroupKey": null,
				"count": 30
			}, options);
			opts.transitionDuration = 0;	// don't use this option.
			opts.isInitLayout = false;	// isInitLayout is always 'false' in order to controll layout.
			opts.isResizeBound = false;	// isResizeBound is always 'false' in order to controll layout.

			// if el is jQuery instance, el should change to HTMLElement.
			if (el instanceof $) {
				el = el.get(0);
			}
			this._prefix = _prefix || "";
			this.core = new InfiniteGridCore(el, opts)
				.on(EVENTS.layoutComplete, $.proxy(this._onlayoutComplete, this));
			this.$global = $(global);
			this._reset();
			this.core.$element.children().length > 0 && this.layout();
			this._onResize = $.proxy(this._onResize, this);
			this.$global.on("resize", this._onResize);

		},
		_onResize: function() {
			if (this.resizeTimeout) {
				clearTimeout(this.resizeTimeout);
			}
			var self = this;
			function delayed() {
				self.core.element.style.width = null;
				self.core.needsResizeLayout() && self.layout();
				delete self.resizeTimeout;
			}
			this.resizeTimeout = setTimeout(delayed, 100);
		},
		/**
		 * Get current status
		 * @ko infiniteGrid의 현재상태를 반환한다.
		 * @method eg.InfiniteGrid#getStatue
		 * @return {Object} infiniteGrid status Object&lt;ko>infiniteGrid 상태 오브젝트&lt;/ko>
		 */
		getStatus: function() {
			var data = [];
			var p;
			for (p in this) {
				if (this.hasOwnProperty(p) && /^_/.test(p)) {
					data.push(p);
				}
			}
			return {
				core: this.core.clone({}, this.core),
				data: clone({}, this, data),
				html: this.core.$element.html(),
				cssText: this.core.element.style.cssText
			};
		},
		/**
		 * Set current status
		 * @ko infiniteGrid의 현재상태를 설정한다.
		 * @method eg.InfiniteGrid#setStatus
		 * @param {Object} status Object
		 * @return {eg.InfiniteGrid} instance of itself&lt;ko>자신의 인스턴스&lt;/ko>
		 */
		setStatus: function(status) {
			this.core.element.style.cssText = status.cssText;
			this.core.$element.html(status.html);
			this.core.items = this.core.itemize(this.core.$element.children().toArray());
			this.core.clone(this.core, status.core);
			$.extend(this, status.data);
			return this;
		},
		/**
		 * Check if element is appending or prepending
		 * @ko append나 prepend가 진행중일 경우 true를 반환한다.
		 * @method eg.InfiniteGrid#isProcessing
		 * @return {Boolean}
		 */
		isProcessing: function() {
			return this._isProcessing;
		},
		/**
		 * Check if elements are in recycling mode
		 * @ko recycle 모드 여부를 반환한다.
		 * @method eg.InfiniteGrid#isRecycling
		 * @return {Boolean}
		 */
		isRecycling: function() {
			return this.core.options.count > 0 && this._isRecycling;
		},
		/**
		 * Get group keys
		 * @ko 그룹키들을 반환한다.
		 * @method eg.InfiniteGrid#getGroupKeys
		 * @return {Array} groupKeys
		 */
		getGroupKeys: function() {
			var result = [];
			if (this.core._isLayoutInited) {
				var i = 0;
				var item;
				while (item = this.core.items[i++]) {
					result.push(item.groupKey);
				}
			}
			return result;
		},
		/**
		 * Rearrange layout
		 * @ko 레이아웃을 재배치한다.
		 * @method eg.InfiniteGrid#layout
		 * @return {eg.InfiniteGrid} instance of itself&lt;ko>자신의 인스턴스&lt;/ko>
		 */
		layout: function() {
			this._isProcessing = true;
			this._isAppendType = true;
			var i = 0;
			var v;
			while (v = this.core.items[i++]) {
				v.isAppend = true;
			}
			this.core.layout();
			return this;
		},
		/**
		 * Append elements
		 * @ko 엘리먼트를 append 한다.
		 * @method eg.InfiniteGrid#append
		 * @param {Array} elements to be appended elements &lt;ko>append될 엘리먼트 배열&lt;/ko>
		 * @param {Number|String} [groupKey] to be appended groupkey of elements&lt;ko>append될 엘리먼트의 그룹키&lt;/ko>
		 * @return {Number} length a number of elements
		 */
		append: function(elements, groupKey) {
			if (this._isProcessing ||  elements.length === 0) {
				return;
			}
			this._isProcessing = true;
			if (!this._isRecycling) {
				this._isRecycling =
				(this.core.items.length + elements.length) >= this.core.options.count;
			}
			this._insert(elements, groupKey, true);
			return elements.length;
		},
		/**
		 * Prepend elements
		 * @ko 엘리먼트를 prepend 한다.
		 * @method eg.InfiniteGrid#prepend
		 * @param {Array} elements to be prepended elements &lt;ko>prepend될 엘리먼트 배열&lt;/ko>
		 * @param {Number|String} [groupKey] to be prepended groupkey of elements&lt;ko>prepend될 엘리먼트의 그룹키&lt;/ko>
		 * @return {Number} length a number of elements
		 */
		prepend: function(elements, groupKey) {
			if (!this.isRecycling() || this._removedContent === 0 ||
				this._isProcessing || elements.length === 0) {
				return;
			}
			this._isProcessing = true;
			this._fit();
			if (elements.length - this._removedContent  > 0) {
				elements = elements.slice(elements.length - this._removedContent);
			}
			this._insert(elements, groupKey, false);
			return elements.length;
		},
		/**
		 * Clear elements and data
		 * @ko 엘리먼트와 데이터를 지운다.
		 * @method eg.InfiniteGrid#clear
		 * @return {eg.InfiniteGrid} instance of itself&lt;ko>자신의 인스턴스&lt;/ko>
		 */
		clear: function() {
			this.core.$element.empty();
			this.core.items.length = 0;
			this._reset();
			this.layout();
			return this;

		},

		_getTopItem: function() {
			var item = null;
			var min = Infinity;
			$.each(this.core.getColItems(false), function(i, v) {
				if (v && v.position.y &lt; min) {
					min = v.position.y;
					item = v;
				}
			});
			return item;
		},

		/**
		 * Get the first element at the top
		 * @ko 가장 위에 있는 엘리먼트를 반환한다.
		 * @method eg.InfiniteGrid#getTopElement
		 *
		 * @return {HTMLElement} element
		 */
		getTopElement: function() {
			var item = this._getTopItem();
			return item && item.element;
		},

		_getBottomItem: function() {
			var item = null;
			var max = -Infinity;
			$.each(this.core.getColItems(true), function(i, v) {
				if (v && v.position.y + v.size.outerHeight > max) {
					max = v.position.y + v.size.outerHeight;
					item = v;
				}
			});
			return item;
		},

		/**
		 * Get the last element at the bottom
		 * @ko 가장 아래에 있는 엘리먼트를 반환한다.
		 * @method eg.InfiniteGrid#getBottomElement
		 *
		 * @return {HTMLElement} element
		 */
		getBottomElement: function() {
			var item = this._getBottomItem();
			return item && item.element;
		},

		_onlayoutComplete: function(e) {
			var distance = 0;
			var isAppend = this._isAppendType;
			if (isAppend === false) {
				this._isFitted = false;
				this._fit(true);
				distance = e.length > this.core.items.length ?
					0 : this.core.items[e.length].position.y;
			}
			var item;
			var i = 0;
			while (item = e[i++]) {
				if (typeof item.oldVisibility !== "undefined") {
					item.element.style.visibility = item.oldVisibility;
					delete item.oldVisibility;
				}
			}

			// reset flags
			this._reset(true);

			/**
			 * Occurs when layout is completed (after append / after prepend / after layout)
			 * @ko 레이아웃이 완료 되었을 때 발생하는 이벤트 (append/prepand/layout 메소드 호출 후, 아이템의 배치가 완료되었을때 발생)
			 * @name eg.InfiniteGrid#layoutComplete
			 * @event
			 *
			 * @param {Object} param
			 * @param {Array} param.target target rearranged elements&lt;ko>재배치된 엘리먼트들&lt;/ko>
			 * @param {Boolean} param.isAppend isAppend determine if append or prepend (value is true when call layout method)&lt;ko>아이템이 append로 추가되었는지, prepend로 추가되었는지를 반한환다. (layout호출시에는 true)&lt;/ko>
			 * @param {Number} param.distance distance&lt;ko>layout 전의 최상단 엘리먼트의 거리&lt;/ko>
			 */
			this.trigger(this._prefix + EVENTS.layoutComplete, {
				target: e.concat(),
				isAppend: isAppend,
				distance: distance
			});
		},
		_insert: function(elements, groupKey, isAppend) {
			if (elements.length === 0) {
				return;
			}
			this._isAppendType = isAppend;
			var i = 0;
			var item;
			var items = this.core.itemize(elements, groupKey);
			while (item = items[i++]) {
				item.isAppend = isAppend;
				item.oldVisibility = item.element.style.visibility;
				item.element.style.visibility = "hidden";
			}
			if (isAppend) {
				this.core.items = this.core.items.concat(items);
			} else {
				this.core.items = items.concat(this.core.items.slice(0));
				items = items.reverse();
			}
			if (this.isRecycling()) {
				this._adjustRange(isAppend, elements);
			}
			var noChild = this.core.$element.children().length === 0;
			this.core.$element[isAppend ? "append" : "prepend"](elements);
			noChild && this.core.resetLayout();		// for init-items

			var needCheck = this._checkImageLoaded(elements);
			var checkCount = needCheck.length;
			checkCount > 0 ? this._waitImageLoaded(items, needCheck) :
					this.core.layoutItems(items, true);
		},
		_adjustRange: function (isTop, elements) {
			var diff = this.core.items.length - this.core.options.count;
			var targets;
			var idx;
			if (diff &lt;= 0 || (idx = this._getDelimiterIndex(isTop, diff)) &lt; 0) {
				return;
			}
			if (isTop) {
				targets = this.core.items.slice(0, idx);
				this.core.items = this.core.items.slice(idx);
				this._isFitted = false;
			} else {
				targets = this.core.items.slice(idx);
				this.core.items = this.core.items.slice(0, idx);
			}

			// @todo improve performance
			var i = 0;
			var item;
			var el;
			var m = elements instanceof $ ? "index" : "indexOf";
			while (item = targets[i++]) {
				el = item.element;
				idx = elements[m](el);
				if (idx !== -1) {
					elements.splice(idx, 1);
				} else {
					el.parentNode.removeChild(el);
				}
			}
			this._removedContent += isTop ? targets.length : -targets.length;

		},
		_getDelimiterIndex: function(isTop, removeCount) {
			var len = this.core.items.length;
			var i;
			var idx = 0;
			var baseIdx = isTop ? removeCount - 1 : len - removeCount;
			var targetIdx = baseIdx + (isTop ? 1 : -1);
			var groupKey = this.core.items[baseIdx].groupKey;
			if (groupKey != null && groupKey === this.core.items[targetIdx].groupKey) {
				if (isTop) {
					for (i = baseIdx; i > 0; i--) {
						if (groupKey !== this.core.items[i].groupKey) {
							break;
						}
					}
					idx =  i === 0 ? -1 : i + 1;
				} else {
					for (i = baseIdx; i &lt; len; i++) {
						if (groupKey !== this.core.items[i].groupKey) {
							break;
						}
					}
					idx = i === len ? -1 : i;
				}
			} else {
				idx = isTop ? targetIdx : baseIdx;
			}
			return idx;
		},

		// fit size
		_fit: function(applyDom) {
			// for caching
			if (this.core.options.count &lt;= 0) {
				this._fit = function() {
					return false;
				};
				this._isFitted = true;
				return false;
			}

			if (this._isFitted) {
				return false;
			}

			var item;
			var height;
			var i = 0;
			var y = this.core.updateCols();	// for prepend
			while (item = this.core.items[i++]) {
				item.position.y -= y;
				applyDom && item.css({
					"top": item.position.y + "px"
				});
			}
			this.core.updateCols(true);	// for append
			height = this.core._getContainerSize().height;
			applyDom && this.core._setContainerMeasure(height, false);
			this._isFitted = true;
			return true;
		},

		/**
		 * Remove white space which was removed by append action.
		 * @ko append에 의해 제거된 빈공간을 제거한다.
		 * @method eg.InfiniteGrid#fit
		 * @return {Number} distance if empty space is removed, value is not zero. &lt;ko>빈공간이 제거되면 0이 아닌 값을 반환&lt;/ko>
		 */
		fit: function() {
			var item = this._getTopItem();
			var distance = item ? item.position.y : 0;
			this._fit(true);
			return distance;
		},
		_reset: function(isLayoutComplete) {
			if (!isLayoutComplete) {
				this._isFitted = true;
				this._isRecycling = false;
				this._removedContent = 0;
			}
			this._isAppendType = null;
			this._isProcessing = false;
		},
		_checkImageLoaded: function(elements) {
			var needCheck = [];
			$(elements).each(function(k, v) {
				if (v.nodeName === "IMG") {
					!v.complete && needCheck.push(v);
				} else if (v.nodeType &&
					(v.nodeType === 1 || v.nodeType === 9 || v.nodeType === 11)) {	// ELEMENT_NODE, DOCUMENT_NODE, DOCUMENT_FRAGMENT_NODE
					needCheck = needCheck.concat($(v).find("img").filter(function(fk, fv) {
						return !fv.complete;
					}).toArray());
				}
			});
			return needCheck;
		},
		_waitImageLoaded: function(items, needCheck) {
			var core = this.core;
			var checkCount = needCheck.length;
			var onCheck = function(e) {
				checkCount--;
				$(e.target).off("load error");
				checkCount &lt;= 0 && core.layoutItems(items, true);
			};
			$.each(needCheck, function(k, v) {
				$(v).on("load error", onCheck);
			});
		},
		/**
		 * Release resources and unbind custom events
		 * @ko 모든 커스텀 이벤트와 자원을 해제한다.
		 * @method eg.InfiniteGrid#destroy
		 */
		destroy: function() {
			if (this.core) {
				this.core.destroy();
				this.core = null;
			}
			this.$global.off("resize", this._onResize);
			this.off();
		}
	});
});
/**
 * InfiniteGrid in jQuery plugin
 * @ko InfiniteGrid in jQuery plugin
 * @method jQuery.infiniteGrid
 * @example
     &lt;ul id="grid">
        &lt;li class="item">
          &lt;div>test1&lt;/div>
        &lt;/li>
        &lt;li class="item">
          &lt;div>test3&lt;/div>
        &lt;/li>
      &lt;/ul>
    &lt;script>
	// create
	$("#content").infiniteGrid({
        itemSelector : ".item"
    });
 	// method
 	$("#content").infiniteGrid("option","itemSelector",".selected"); //Set option
 	$("#content").infiniteGrid("instance"); // Return infiniteGrid instance
 	$("#content").infiniteGrid("getBottomElement"); // Get bottom element
 	&lt;/script>
 * @see eg.InfiniteGrid
 */
 /**
 * infiniteGrid:layoutComplete jQuery event plugin
 *
 * @ko infiniteGrid:layoutComplete jQuery event plugin
 * @name jQuery#infiniteGrid:layoutComplete
 * @event
 * @param {Object} param
 * @param {Array} param.target target rearranged elements&lt;ko>재배치된 엘리먼트들&lt;/ko>
 * @param {Boolean} param.isAppend isAppend determine if append or prepend (value is true when call layout method)&lt;ko>아이템이 append로 추가되었는지, prepend로 추가되었는지를 반한환다. (layout호출시에는 true)&lt;/ko>
 * @param {Number} param.distance distance&lt;ko>layout 전의 최상단 엘리먼트의 거리&lt;/ko>
 * @example
     &lt;ul id="grid">
        &lt;li class="item">
          &lt;div>test1&lt;/div>
        &lt;/li>
        &lt;li class="item">
          &lt;div>test3&lt;/div>
        &lt;/li>
      &lt;/ul>
    &lt;script>
	// create
	$("#content").infiniteGrid({
        itemSelector : ".item"
    });
 	// event
 	$("#content").on("infiniteGrid:layoutComplete",callback);
 	$("#content").off("infiniteGrid:layoutComplete",callback);
 	$("#content").trigger("infiniteGrid:layoutComplete",callback);
 	&lt;/script>
 * @see eg.InfiniteGrid
 */
</code></pre>
        </article>
    </section>






        
        <!-- disqus code -->
        <div id="disqus_thread"></div>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
        <!-- // disqus code -->
        

        <footer>
            Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.2.2</a> on Thu Dec 17 2015 15:20:48 GMT+0900 (KST)
        </footer>
    </div>
</div>
<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
<script src="scripts/main.js"></script>
</body>
</html>
